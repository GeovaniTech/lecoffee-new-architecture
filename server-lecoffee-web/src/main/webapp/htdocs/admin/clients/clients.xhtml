<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<h:body>
	<ui:composition template="/templates/admin/layout.xhtml">
		<ui:define name="name_page">
			<h:outputText value="#{label.customers}" />
		</ui:define>

		<ui:define name="body">
			<h:outputStylesheet library="css" name="/admin/clients/clients.css" />

			<h:form id="formClients">
				<div class="top-buttons mg-b-10">
					<p:commandButton 
						action="#{MBClient.initNewClient}"
						oncomplete="PF('dialogClientInfoVW').show()"
						icon="pi pi-plus" 
						styleClass="optionsButtonStyle" />
				</div>
			
				<p:dataTable 
					var="toClient" 
					value="#{MBClient.results}"
					rowKey="#{toClient.id}"
					rows="20"
                    paginator="true" 
                    paginatorPosition="top"
                    lazy="true">
                    
					<p:column headerText="#{label.email}">
						<h:outputText value="#{toClient.email}" />
					</p:column>
					
					<p:column headerText="#{label.phone_number}">
						<h:outputText value="#{toClient.phoneNumber}" />
					</p:column>
					
					<p:column headerText="#{label.security_level}">
						<h:outputText value="#{toClient.securityLevel}"/>
					</p:column>
					
					<p:column headerText="#{label.blocked}">
						<h:outputText value="#{toClient.blocked ? label.yes : label.no}"/>
					</p:column>
					
					<p:column headerText="#{label.last_login}">
						<h:outputText value="#{toClient.lastLogin}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
						</h:outputText>
					</p:column>
					
					<p:column headerText="#{label.creation_user}">
						<h:outputText value="#{toClient.creationUser}" />
					</p:column>
					
					<p:column headerText="#{label.creation_date}">
						<h:outputText value="#{toClient.creationDate}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
						</h:outputText>
					</p:column>
					
					<p:column headerText="#{label.inactivation_user}">
						<h:outputText value="#{toClient.inactivationUser}" />
					</p:column>
					
					<p:column headerText="#{label.inactivation_date}">
						<h:outputText value="#{toClient.inactivationDate}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
						</h:outputText>
					</p:column>
				</p:dataTable>
			</h:form>
			
			<ui:include src="/htdocs/admin/clients/client_info.xhtml" />
		</ui:define>
	</ui:composition>
</h:body>
</html>
